FROM mcr.microsoft.com/playwright:v1.51.1-jammy
SHELL ["/bin/bash", "-lc"]

WORKDIR /usr/app

# (Node is already in the image. If you don't need extra system deps, skip apt entirely.)

# Create a vscode user to match devcontainer.json
RUN useradd -m -s /bin/bash vscode \
 && usermod -aG sudo vscode \
 && echo "vscode ALL=(ALL) NOPASSWD:ALL" > /etc/sudoers.d/90-vscode

# Sanity checks
RUN node -v && npm -v && npx --yes playwright --version

USER vscode